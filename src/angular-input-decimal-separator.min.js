angular.module("ng-inputdecimalseparator",[]).directive("inputDecimalSeparator",["$locale",function(a,b){return{restrict:"A",require:"?ngModel",compile:function(b,c){return function(b,c,d,e,f){if(e){var g=a.NUMBER_FORMATS.DECIMAL_SEP,h=a.NUMBER_FORMATS.GROUP_SEP,i=".",j=isNaN(d.decimalMax)||""===d.decimalMax?null:parseFloat(d.decimalMax),k=isNaN(d.decimalMin)||""===d.decimalMin?null:parseFloat(d.decimalMin),l=2,m="-";(d.inputDecimalSeparator||""!=d.inputDecimalSeparator)&&(l=isNaN(d.inputDecimalSeparator)?2:Number(d.inputDecimalSeparator),l=Math.floor(l)),"false"===d.applyThousandDelimiter&&(h=""),e.$parsers.push(function(b){if(!b||""===b)return null;var c=0==b.indexOf(m),d="[^0-9"+g+"]",f=new RegExp(d,"g"),n=b.replace(f,"");if(!n||""===n)return null;var o=n.split(g);o.splice(2,o.length-2),l&&o[1]&&(o[1]=o[1].substring(0,l));var p=l>0?o.join(g):o[0],q=o.join(i);return c&&(q=m+q),e.$setValidity("max",!0),e.$setValidity("min",!0),j&&1*q>j&&e.$setValidity("max",!1),k&&1*q<k&&e.$setValidity("min",!1),p&&(o=p.split(a.NUMBER_FORMATS.DECIMAL_SEP),o[0]&&(o[0]=o[0].split(/(?=(?:...)*$)/).join(h)),p=o.join(a.NUMBER_FORMATS.DECIMAL_SEP)),c&&(p=m+p),p!=b&&(e.$setViewValue(p),e.$render()),q}),e.$formatters.push(function(b){if(!b||""===b)return null;var c="[^0-9"+g+"]",d=new RegExp(c,"g");b=b.toString();var f=0==b.indexOf(m);(b=b.replace(d,""))&&""!==b||(b="0");var n=b.split(i);n.splice(2,n.length-2),l&&n[1]&&(n[1]=n[1].substring(0,l));var o=l>0?n.join(g):n[0],p=Number(n.join(i));return j&&p>j&&e.$setValidity("max",!1),k&&p<k&&e.$setValidity("min",!1),o&&(n=o.split(a.NUMBER_FORMATS.DECIMAL_SEP),n[0]&&(n[0]=n[0].split(/(?=(?:...)*$)/).join(h)),o=n.join(a.NUMBER_FORMATS.DECIMAL_SEP),f&&(o=m+o)),o})}}}}}]);